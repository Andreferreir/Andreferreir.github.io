import { useState, useEffect, useRef, createContext, useContext } from "react";

// ‚îÄ‚îÄ‚îÄ DESIGN TOKENS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const CSS = `
  @import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap');
  :root {
    --blue: #003580; --blue2: #0055cc; --teal: #007a8a; --teal2: #00b4c8;
    --cork: #c8a96e; --sand: #f0e8d8; --dark: #080e1e; --card: #0d1530;
    --card2: #111b38; --white: #fff; --muted: #6b82aa; --border: rgba(255,255,255,0.07);
    --success: #22c55e; --warn: #f59e0b; --danger: #ef4444;
  }
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }
  body { font-family: 'DM Sans', sans-serif; background: var(--dark); color: var(--white); overflow-x: hidden; }
  h1,h2,h3,h4,h5 { font-family: 'Syne', sans-serif; }
  ::-webkit-scrollbar { width: 6px; } ::-webkit-scrollbar-track { background: var(--dark); }
  ::-webkit-scrollbar-thumb { background: var(--card2); border-radius: 3px; }
`;

// ‚îÄ‚îÄ‚îÄ GLOBAL STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const AppCtx = createContext(null);

// ‚îÄ‚îÄ‚îÄ MOCK DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const USERS_DB = {
  "admin@sespt.pt":   { name:"Sofia Andrade", role:"admin",   quota:true,  avatar:"SA", type:"Admin SESPT" },
  "membro@incose.pt": { name:"Carlos Mendes", role:"member",  quota:true,  avatar:"CM", type:"Membro Individual" },
  "cab@embraer.pt":   { name:"Ana Ferreira",  role:"cab",     quota:true,  avatar:"AF", type:"CAB ‚Äì Embraer" },
  "estudante@ist.pt": { name:"Tom√°s Lima",    role:"student", quota:false, avatar:"TL", type:"Membro Estudante" },
};
const PASS = "demo123";

const EVENTS_DATA = [
  { id:1, title:"INCOSE Portugal Summit 2026", date:"2026-03-15", end:"2026-03-15", location:"Centro de Congressos do Estoril, Lisboa", format:"presencial", type:"summit", desc:"A maior confer√™ncia anual do cap√≠tulo, com keynotes internacionais, workshops e networking.", price:{ public:120, member:60, student:25 }, capacity:300, registered:187 },
  { id:2, title:"Webinar: MBSE com SysML v2 ‚Äì Primeiros passos", date:"2026-03-28", end:"2026-03-28", location:"Online ¬∑ Zoom", format:"online", type:"webinar", desc:"Introdu√ß√£o pr√°tica ao SysML v2 com exemplos reais de sistemas aeroespaciais.", price:{ public:20, member:0, student:0 }, capacity:200, registered:89 },
  { id:3, title:"ASEP Prep-Course ‚Äì Lisboa (Primavera)", date:"2026-04-12", end:"2026-04-14", location:"Lisboa ¬∑ Local a confirmar", format:"presencial", type:"workshop", desc:"3 dias intensivos de prepara√ß√£o para o exame ASEP com instrutores certificados.", price:{ public:400, member:280, student:150 }, capacity:30, registered:22 },
  { id:4, title:"WG Defense Systems ‚Äì Reuni√£o Q2", date:"2026-05-24", end:"2026-05-24", location:"Online ¬∑ Teams", format:"online", type:"wg", desc:"Reuni√£o aberta do Working Group de Defense Systems. Todos podem assistir.", price:{ public:0, member:0, student:0 }, capacity:100, registered:34 },
  { id:5, title:"Workshop: Requirements Engineering para ESA", date:"2026-06-10", end:"2026-06-11", location:"Porto ¬∑ Hotel Sheraton", format:"presencial", type:"workshop", desc:"Workshop focado nos standards ECSS para engenharia de requisitos em projetos espaciais.", price:{ public:350, member:220, student:120 }, capacity:25, registered:18 },
];

const JOBS_DATA = [
  { id:1, company:"Embraer Portugal", logo:"EMB", title:"Systems Engineer ‚Äì Aerostructures", location:"√âvora", type:"Full-time", tags:["MBSE","SysML","Aerostructures"], desc:"Integra√ß√£o de sistemas de estruturas aeron√°uticas no novo programa de jatos executivos.", posted:"2026-02-15", cab:true },
  { id:2, company:"EDP Renewables", logo:"EDP", title:"Lead SE ‚Äì Offshore Wind Division", location:"Lisboa", type:"Full-time", tags:["Requisitos","Interface Mgmt","Offshore"], desc:"Lideran√ßa t√©cnica da equipa de SE para o programa WindFloat Atlantic 2.0.", posted:"2026-02-20", cab:true },
  { id:3, company:"IST / INESC-ID", logo:"IST", title:"Investigador Doutoramento ‚Äì MBSE", location:"Lisboa / Remoto", type:"Bolsa FCT", tags:["PhD","MBSE","Investiga√ß√£o"], desc:"Bolsa FCT para doutoramento em Model-Based Systems Engineering aplicado a sistemas ciber-f√≠sicos.", posted:"2026-02-22", cab:false },
  { id:4, company:"Thales Alenia Space", logo:"TAS", title:"Systems Architect ‚Äì Space Segment", location:"Porto", type:"Full-time", tags:["Space","ECSS","CSEP preferido"], desc:"Arquitetura de sistemas para segmento espacial em programa de observa√ß√£o da Terra.", posted:"2026-02-25", cab:true },
  { id:5, company:"Critical Software", logo:"CSW", title:"SE Consultant ‚Äì Automotive", location:"Coimbra / Remoto", type:"Full-time", tags:["ISO 26262","SOTIF","Requisitos"], desc:"Consultoria em engenharia de sistemas para projetos de ve√≠culos aut√≥nomos.", posted:"2026-02-26", cab:true },
  { id:6, company:"Hovione", logo:"HOV", title:"Validation Systems Engineer", location:"Lisboa", type:"Full-time", tags:["GxP","V&V","Farmac√™utico"], desc:"Engenheiro de valida√ß√£o para linha de produ√ß√£o farmac√™utica cont√≠nua.", posted:"2026-02-27", cab:false },
];

const DOCS_DATA = [
  { id:1, title:"INCOSE SE Handbook v5.0 (PT)", type:"PDF", size:"12.4 MB", category:"handbook", restricted:true, icon:"üìò", date:"2025-12" },
  { id:2, title:"Template: Requirements Baseline", type:"DOCX", size:"340 KB", category:"template", restricted:true, icon:"üìã", date:"2025-11" },
  { id:3, title:"Template: System Architecture (SysML)", type:"ZIP", size:"2.1 MB", category:"template", restricted:true, icon:"üèóÔ∏è", date:"2025-10" },
  { id:4, title:"Webinar: Introdu√ß√£o ao MBSE (Nov 2025)", type:"MP4", size:"1.2 GB", category:"webinar", restricted:true, icon:"üé•", date:"2025-11" },
  { id:5, title:"Webinar: SysML v2 Overview (Jan 2026)", type:"MP4", size:"890 MB", category:"webinar", restricted:true, icon:"üé•", date:"2026-01" },
  { id:6, title:"Guia: ASEP Exam Preparation (PT)", type:"PDF", size:"8.7 MB", category:"guide", restricted:true, icon:"üéì", date:"2026-01" },
  { id:7, title:"Estatutos SESPT 2025", type:"PDF", size:"420 KB", category:"legal", restricted:false, icon:"üìú", date:"2025-09" },
  { id:8, title:"Relat√≥rio Anual 2025", type:"PDF", size:"3.2 MB", category:"legal", restricted:false, icon:"üìä", date:"2026-01" },
];

const NEWS_DATA = [
  { id:1, title:"Portugal lidera WG INCOSE sobre Offshore Renewables", category:"Destaque", date:"2026-02-24", excerpt:"A WindFloat Atlantic tornou-se caso de estudo internacional. O cap√≠tulo portugu√™s coordena agora o WG dedicado a sistemas de energia renov√°vel offshore com parceiros de 12 pa√≠ses.", icon:"üåä", pinned:true },
  { id:2, title:"Embraer √âvora junta-se ao Corporate Advisory Board", category:"CAB", date:"2026-02-18", excerpt:"A fabricante aeron√°utica refor√ßa a presen√ßa industrial no cap√≠tulo, trazendo experi√™ncia em sistemas aeroespaciais complexos.", icon:"‚úàÔ∏è", pinned:false },
  { id:3, title:"3¬™ turma CSEP em Portugal: 12 aprovados", category:"Certifica√ß√£o", date:"2026-02-10", excerpt:"Recordes de aprova√ß√£o no prep-course de dezembro de 2025. A taxa de aprova√ß√£o foi de 92%, acima da m√©dia global INCOSE.", icon:"üèÖ", pinned:false },
  { id:4, title:"INCOSE Portugal no INCOSE IS 2026 ‚Äì Las Vegas", category:"Internacional", date:"2026-01-30", excerpt:"Tr√™s membros do cap√≠tulo portugu√™s apresentaram papers no Symposium anual. Portugal ganhou visibilidade no ecossistema global.", icon:"üåç", pinned:false },
];

// ‚îÄ‚îÄ‚îÄ TRANSLATIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const T = {
  pt: {
    nav: { home:"In√≠cio", about:"Sobre N√≥s", events:"Eventos", knowledge:"Knowledge", jobs:"Carreiras", membership:"Ades√£o", admin:"Backoffice", dashboard:"Dashboard", login:"Login / Registo", logout:"Terminar sess√£o" },
    hero: { badge:"Cap√≠tulo oficial INCOSE em Portugal", h1a:"Engenharia de Sistemas", h1b:"com ra√≠zes atl√¢nticas", p:"A comunidade portuguesa de profissionais INCOSE. Forma√ß√£o certificada, networking, Working Groups ativos e representa√ß√£o no ecossistema global de Systems Engineering.", cta1:"Tornar-me s√≥cio", cta2:"Ver eventos" },
    footer_legal: "O Cap√≠tulo INCOSE Portugal √© legalmente representado e operado pela SESPT ‚Äì Sociedade de Engenharia de Sistemas de Portugal, NIF [inserir n√∫mero].",
  },
  en: {
    nav: { home:"Home", about:"About", events:"Events", knowledge:"Knowledge", jobs:"Careers", membership:"Join", admin:"Backoffice", dashboard:"Dashboard", login:"Login / Register", logout:"Sign out" },
    hero: { badge:"Official INCOSE Chapter in Portugal", h1a:"Systems Engineering", h1b:"with Atlantic roots", p:"The Portuguese community of INCOSE professionals. Certified training, networking, active Working Groups and representation in the global SE ecosystem.", cta1:"Become a member", cta2:"See events" },
    footer_legal: "The INCOSE Portugal Chapter is legally represented and operated by SESPT ‚Äì Sociedade de Engenharia de Sistemas de Portugal, NIF [to be inserted].",
  }
};

// ‚îÄ‚îÄ‚îÄ STYLES OBJECT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const S = {
  // Layout
  page: { minHeight:"100vh", display:"flex", flexDirection:"column" },
  container: { maxWidth:1200, margin:"0 auto", padding:"0 2rem", width:"100%" },
  
  // Utility bar
  utilBar: { background:"rgba(0,20,60,0.98)", borderBottom:"1px solid var(--border)", padding:"0.35rem 2rem", display:"flex", alignItems:"center", justifyContent:"flex-end", gap:"1.2rem", fontSize:"0.76rem" },
  
  // Header
  header: { position:"sticky", top:0, zIndex:200, background:"rgba(8,14,30,0.97)", backdropFilter:"blur(20px)", borderBottom:"1px solid var(--border)", padding:"0 2rem", display:"flex", alignItems:"center", justifyContent:"space-between", height:66, gap:"1rem" },
  logoMark: { width:40, height:40, borderRadius:6, background:"var(--blue)", display:"flex", alignItems:"center", justifyContent:"center", fontSize:"0.6rem", fontWeight:800, color:"#fff", fontFamily:"'Syne', sans-serif", letterSpacing:0.5, flexShrink:0, border:"2px solid rgba(0,85,204,0.5)" },
  
  // Nav
  navLink: (active) => ({ padding:"0 0.85rem", height:66, display:"flex", alignItems:"center", color: active ? "#fff" : "rgba(255,255,255,0.6)", textDecoration:"none", fontSize:"0.83rem", fontWeight:500, borderBottom: active ? "2px solid var(--teal2)" : "2px solid transparent", cursor:"pointer", transition:"all 0.2s", background:"none", border:"none", borderBottom: active ? "2px solid var(--teal2)" : "2px solid transparent", fontFamily:"'DM Sans', sans-serif", whiteSpace:"nowrap" }),
  
  // Buttons
  btn: (variant="primary", size="md") => {
    const base = { display:"inline-flex", alignItems:"center", gap:"0.4rem", fontFamily:"'DM Sans', sans-serif", fontWeight:600, cursor:"pointer", border:"none", borderRadius:6, transition:"all 0.2s", textDecoration:"none" };
    const sizes = { sm:{ padding:"0.35rem 0.85rem", fontSize:"0.78rem" }, md:{ padding:"0.65rem 1.4rem", fontSize:"0.88rem" }, lg:{ padding:"0.8rem 2rem", fontSize:"0.95rem" } };
    const variants = {
      primary: { background:"var(--blue)", color:"#fff" },
      teal: { background:"var(--teal)", color:"#fff" },
      ghost: { background:"transparent", color:"rgba(255,255,255,0.65)", border:"1px solid var(--border)" },
      danger: { background:"rgba(239,68,68,0.15)", color:"var(--danger)", border:"1px solid rgba(239,68,68,0.3)" },
      success: { background:"rgba(34,197,94,0.15)", color:"var(--success)", border:"1px solid rgba(34,197,94,0.3)" },
    };
    return { ...base, ...sizes[size], ...variants[variant] };
  },
  
  // Cards
  card: (hover=true) => ({ background:"var(--card)", border:"1px solid var(--border)", borderRadius:12, transition: hover ? "all 0.25s" : "none" }),
  
  // Form
  input: { width:"100%", background:"rgba(255,255,255,0.05)", border:"1px solid var(--border)", borderRadius:6, padding:"0.65rem 1rem", color:"#fff", fontFamily:"'DM Sans', sans-serif", fontSize:"0.88rem" },
  label: { display:"block", fontSize:"0.75rem", fontWeight:600, color:"var(--muted)", marginBottom:"0.35rem", letterSpacing:0.5 },
  
  // Tags
  tag: (color="default") => {
    const colors = { default:{ background:"rgba(255,255,255,0.05)", color:"var(--muted)", border:"1px solid var(--border)" }, teal:{ background:"rgba(0,180,200,0.12)", color:"var(--teal2)", border:"1px solid rgba(0,180,200,0.25)" }, blue:{ background:"rgba(0,85,204,0.15)", color:"#7ab2ff", border:"1px solid rgba(0,85,204,0.3)" }, cork:{ background:"rgba(200,169,110,0.12)", color:"var(--cork)", border:"1px solid rgba(200,169,110,0.25)" }, green:{ background:"rgba(34,197,94,0.1)", color:"var(--success)", border:"1px solid rgba(34,197,94,0.2)" }, warn:{ background:"rgba(245,158,11,0.1)", color:"var(--warn)", border:"1px solid rgba(245,158,11,0.2)" } };
    return { display:"inline-flex", alignItems:"center", padding:"0.15rem 0.5rem", borderRadius:4, fontSize:"0.68rem", fontWeight:600, letterSpacing:0.5, ...colors[color] };
  },
  
  // Section
  sectionLabel: { fontSize:"0.68rem", fontWeight:700, letterSpacing:3, textTransform:"uppercase", color:"var(--teal2)", marginBottom:"0.6rem" },
  sectionTitle: { fontSize:"clamp(1.6rem, 3vw, 2.4rem)", fontWeight:800, letterSpacing:-0.5, lineHeight:1.15, marginBottom:"0.8rem" },
};

// ‚îÄ‚îÄ‚îÄ HELPER COMPONENTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const GradText = ({ children }) => (
  <span style={{ background:"linear-gradient(135deg, var(--teal2), var(--cork))", WebkitBackgroundClip:"text", WebkitTextFillColor:"transparent" }}>
    {children}
  </span>
);

const TopBar = (p) => (
  <div style={{ background:"linear-gradient(135deg, rgba(0,122,138,0.08), rgba(0,53,128,0.05))", border:"1px solid var(--border)", borderRadius:8, padding:p.p||"1rem 1.2rem", ...p.style }}>
    {p.children}
  </div>
);

const Modal = ({ open, onClose, title, children, width=460 }) => {
  if (!open) return null;
  return (
    <div onClick={(e)=>e.target===e.currentTarget&&onClose()} style={{ position:"fixed", inset:0, background:"rgba(0,0,0,0.8)", zIndex:500, display:"flex", alignItems:"center", justifyContent:"center", padding:"1rem", backdropFilter:"blur(8px)" }}>
      <div style={{ background:"var(--card)", border:"1px solid var(--border)", borderRadius:16, width:"100%", maxWidth:width, maxHeight:"90vh", overflowY:"auto", position:"relative" }}>
        <div style={{ borderTop:"3px solid", borderImage:"linear-gradient(90deg, var(--blue), var(--teal)) 1", borderRadius:"16px 16px 0 0" }} />
        <div style={{ padding:"1.5rem 1.8rem" }}>
          <div style={{ display:"flex", alignItems:"center", justifyContent:"space-between", marginBottom:"1.2rem" }}>
            <h3 style={{ fontFamily:"'Syne',sans-serif", fontSize:"1.2rem", fontWeight:700 }}>{title}</h3>
            <button onClick={onClose} style={{ background:"transparent", border:"none", color:"var(--muted)", cursor:"pointer", fontSize:"1.2rem", padding:"0.2rem" }}>‚úï</button>
          </div>
          {children}
        </div>
      </div>
    </div>
  );
};

const Badge = ({ children, color="default" }) => <span style={S.tag(color)}>{children}</span>;

const Divider = () => <hr style={{ border:"none", borderTop:"1px solid var(--border)", margin:"1rem 0" }} />;

const Alert = ({ type="info", children }) => {
  const colors = { info:{ bg:"rgba(0,180,200,0.08)", border:"rgba(0,180,200,0.25)", text:"var(--teal2)" }, warn:{ bg:"rgba(245,158,11,0.08)", border:"rgba(245,158,11,0.25)", text:"var(--warn)" }, success:{ bg:"rgba(34,197,94,0.08)", border:"rgba(34,197,94,0.25)", text:"var(--success)" }, error:{ bg:"rgba(239,68,68,0.08)", border:"rgba(239,68,68,0.25)", text:"var(--danger)" } };
  const c = colors[type];
  return <div style={{ background:c.bg, border:`1px solid ${c.border}`, borderRadius:8, padding:"0.7rem 1rem", fontSize:"0.83rem", color:c.text, display:"flex", gap:"0.5rem", alignItems:"flex-start" }}>{children}</div>;
};

// ‚îÄ‚îÄ‚îÄ AUTH MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const AuthModal = ({ open, onClose }) => {
  const { login } = useContext(AppCtx);
  const [tab, setTab] = useState("login");
  const [email, setEmail] = useState("membro@incose.pt");
  const [pass, setPass] = useState("demo123");
  const [err, setErr] = useState("");
  const [regData, setRegData] = useState({ name:"", email:"", type:"individual" });

  const doLogin = () => {
    const u = USERS_DB[email];
    if (u && pass === PASS) { login({ email, ...u }); onClose(); setErr(""); }
    else setErr("Email ou password incorretos.");
  };

  const demoLogins = [
    { label:"Admin SESPT", email:"admin@sespt.pt" },
    { label:"Membro Ativo", email:"membro@incose.pt" },
    { label:"CAB Rep.", email:"cab@embraer.pt" },
    { label:"Estudante (quota inativa)", email:"estudante@ist.pt" },
  ];

  return (
    <Modal open={open} onClose={onClose} title={tab==="login" ? "Entrar na plataforma" : "Criar conta"}>
      <div style={{ display:"flex", gap:0, borderBottom:"1px solid var(--border)", marginBottom:"1.2rem" }}>
        {["login","register"].map(t=>(
          <button key={t} onClick={()=>{ setTab(t); setErr(""); }} style={{ flex:1, background:"transparent", border:"none", borderBottom: tab===t ? "2px solid var(--teal2)" : "2px solid transparent", padding:"0.6rem", color: tab===t ? "#fff" : "var(--muted)", cursor:"pointer", fontFamily:"'DM Sans',sans-serif", fontWeight:600, fontSize:"0.85rem", transition:"all 0.2s" }}>
            {t==="login" ? "Login" : "Registar"}
          </button>
        ))}
      </div>

      {tab === "login" ? (
        <>
          <div style={{ marginBottom:"0.8rem" }}>
            <label style={S.label}>Email</label>
            <input style={S.input} value={email} onChange={e=>setEmail(e.target.value)} type="email" />
          </div>
          <div style={{ marginBottom:"0.8rem" }}>
            <label style={S.label}>Password</label>
            <input style={S.input} value={pass} onChange={e=>setPass(e.target.value)} type="password" />
          </div>
          {err && <Alert type="error">‚ö† {err}</Alert>}
          <button style={{ ...S.btn("primary","md"), width:"100%", justifyContent:"center", marginTop:"1rem" }} onClick={doLogin}>Entrar ‚Üí</button>
          <Divider/>
          <p style={{ fontSize:"0.72rem", color:"var(--muted)", marginBottom:"0.6rem", fontWeight:600, letterSpacing:1 }}>DEMO ‚Äì Clicar para testar:</p>
          <div style={{ display:"flex", gap:"0.4rem", flexWrap:"wrap" }}>
            {demoLogins.map(d=>(
              <button key={d.email} onClick={()=>{ setEmail(d.email); setPass("demo123"); }} style={{ ...S.btn("ghost","sm"), fontSize:"0.7rem" }}>{d.label}</button>
            ))}
          </div>
        </>
      ) : (
        <>
          <Alert type="info">üìã Ap√≥s o registo, a conta aguarda aprova√ß√£o da equipa SESPT.</Alert>
          <div style={{ marginTop:"1rem", marginBottom:"0.8rem" }}>
            <label style={S.label}>Nome completo</label>
            <input style={S.input} value={regData.name} onChange={e=>setRegData({...regData,name:e.target.value})} />
          </div>
          <div style={{ marginBottom:"0.8rem" }}>
            <label style={S.label}>Email profissional</label>
            <input style={S.input} value={regData.email} onChange={e=>setRegData({...regData,email:e.target.value})} type="email" />
          </div>
          <div style={{ marginBottom:"0.8rem" }}>
            <label style={S.label}>Tipo de ades√£o</label>
            <select style={{ ...S.input, appearance:"none" }} value={regData.type} onChange={e=>setRegData({...regData,type:e.target.value})}>
              <option value="individual">Membro Individual (80‚Ç¨/ano)</option>
              <option value="student">Membro Estudante (30‚Ç¨/ano)</option>
              <option value="cab">Empresa CAB (800‚Ç¨/ano)</option>
            </select>
          </div>
          <button style={{ ...S.btn("teal","md"), width:"100%", justifyContent:"center", marginTop:"0.5rem" }}>Submeter pedido de ades√£o ‚Üí</button>
        </>
      )}
    </Modal>
  );
};

// ‚îÄ‚îÄ‚îÄ COOKIE BANNER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const CookieBanner = ({ onAccept }) => (
  <div style={{ position:"fixed", bottom:0, left:0, right:0, zIndex:999, background:"rgba(8,14,30,0.98)", borderTop:"1px solid var(--border)", padding:"1rem 2rem", display:"flex", alignItems:"center", justifyContent:"space-between", gap:"1rem", flexWrap:"wrap", backdropFilter:"blur(16px)" }}>
    <p style={{ fontSize:"0.82rem", color:"var(--muted)", maxWidth:600 }}>
      Usamos cookies para melhorar a sua experi√™ncia e an√°lise de tr√°fego (RGPD). <a href="#" style={{ color:"var(--teal2)" }}>Pol√≠tica de Privacidade</a>
    </p>
    <div style={{ display:"flex", gap:"0.6rem" }}>
      <button onClick={onAccept} style={S.btn("ghost","sm")}>Recusar n√£o essenciais</button>
      <button onClick={onAccept} style={S.btn("teal","sm")}>Aceitar todos</button>
    </div>
  </div>
);

// ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const Header = ({ page, setPage, lang, setLang, user, onOpenAuth }) => {
  const { logout } = useContext(AppCtx);
  const t = T[lang].nav;
  const navItems = [
    { key:"home", label:t.home },
    { key:"about", label:t.about },
    { key:"events", label:t.events },
    { key:"knowledge", label:t.knowledge },
    { key:"jobs", label:t.jobs },
    { key:"membership", label:t.membership },
    ...(user?.role==="admin" ? [{ key:"admin", label:t.admin }] : []),
    ...(user ? [{ key:"dashboard", label:t.dashboard }] : []),
  ];

  return (
    <>
      {/* Utility bar */}
      <div style={S.utilBar}>
        <div style={{ display:"flex", gap:0, border:"1px solid var(--border)", borderRadius:4, overflow:"hidden" }}>
          {["pt","en"].map(l=>(
            <button key={l} onClick={()=>setLang(l)} style={{ background: lang===l ? "var(--teal)" : "transparent", border:"none", padding:"0.2rem 0.55rem", color: lang===l ? "#fff" : "var(--muted)", cursor:"pointer", fontFamily:"'DM Sans',sans-serif", fontWeight:700, fontSize:"0.72rem", transition:"all 0.2s" }}>
              {l.toUpperCase()}
            </button>
          ))}
        </div>
        <a href="https://linkedin.com" target="_blank" style={{ color:"var(--muted)", textDecoration:"none", fontSize:"0.75rem" }}>LinkedIn ‚Üó</a>
        <a href="https://youtube.com" target="_blank" style={{ color:"var(--muted)", textDecoration:"none", fontSize:"0.75rem" }}>YouTube ‚Üó</a>
        {user ? (
          <div style={{ display:"flex", alignItems:"center", gap:"0.6rem" }}>
            <div style={{ width:26, height:26, borderRadius:"50%", background:"var(--teal)", display:"flex", alignItems:"center", justifyContent:"center", fontSize:"0.65rem", fontWeight:800 }}>{user.avatar}</div>
            <span style={{ color:"rgba(255,255,255,0.7)", fontSize:"0.75rem" }}>{user.name}</span>
            <button onClick={logout} style={{ ...S.btn("ghost","sm"), fontSize:"0.72rem", padding:"0.2rem 0.6rem" }}>{t.logout}</button>
          </div>
        ) : (
          <button onClick={onOpenAuth} style={{ ...S.btn("primary","sm"), fontSize:"0.72rem", padding:"0.25rem 0.7rem" }}>üîê {t.login}</button>
        )}
      </div>

      {/* Main header */}
      <header style={S.header}>
        {/* Logo group */}
        <div style={{ display:"flex", alignItems:"center", gap:"1.2rem", flexShrink:0 }}>
          <button onClick={()=>setPage("home")} style={{ display:"flex", alignItems:"center", gap:"0.7rem", background:"none", border:"none", cursor:"pointer" }}>
            <div style={S.logoMark}>INCOSE</div>
            <div style={{ lineHeight:1.15 }}>
              <div style={{ fontSize:"1rem", fontWeight:700, fontFamily:"'Syne',sans-serif", color:"#fff" }}>INCOSE Portugal</div>
              <div style={{ fontSize:"0.6rem", color:"var(--cork)", letterSpacing:2, textTransform:"uppercase" }}>Cap√≠tulo Oficial</div>
            </div>
          </button>
          <div style={{ width:1, height:28, background:"var(--border)" }}/>
          <span style={{ fontSize:"0.65rem", fontWeight:700, color:"var(--muted)", letterSpacing:1, textTransform:"uppercase" }}>SESPT</span>
        </div>

        {/* Nav */}
        <nav style={{ display:"flex", gap:0, overflowX:"auto" }}>
          {navItems.map(({ key, label }) => (
            <button key={key} onClick={()=>setPage(key)} style={S.navLink(page===key)}>{label}</button>
          ))}
        </nav>

        <button onClick={()=>setPage("membership")} style={S.btn("teal","sm")}>Aderir ‚Üí</button>
      </header>
    </>
  );
};

// ‚îÄ‚îÄ‚îÄ HOME PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const HomePage = ({ setPage, lang, user, onOpenAuth }) => {
  const t = T[lang];
  const [visible, setVisible] = useState(false);
  useEffect(()=>{ setTimeout(()=>setVisible(true), 50); }, []);

  return (
    <div>
      {/* HERO */}
      <section style={{ position:"relative", minHeight:"88vh", display:"flex", alignItems:"center", overflow:"hidden", background:"linear-gradient(135deg, #050c1a 0%, #001040 55%, #002244 100%)" }}>
        {/* BG grid */}
        <div style={{ position:"absolute", inset:0, backgroundImage:"linear-gradient(rgba(0,122,138,0.05) 1px,transparent 1px),linear-gradient(90deg,rgba(0,122,138,0.05) 1px,transparent 1px)", backgroundSize:"55px 55px", maskImage:"radial-gradient(ellipse 80% 80% at 50% 50%, black 20%, transparent 100%)" }}/>
        <div style={{ position:"absolute", top:"-20%", right:"-5%", width:600, height:600, borderRadius:"50%", background:"radial-gradient(circle, rgba(0,122,138,0.15) 0%, transparent 70%)" }}/>
        
        <div style={{ ...S.container, display:"grid", gridTemplateColumns:"1fr 1fr", gap:"4rem", alignItems:"center", position:"relative", zIndex:2 }}>
          {/* Left */}
          <div style={{ opacity: visible?1:0, transform: visible?"none":"translateX(-24px)", transition:"all 0.7s 0.1s" }}>
            <div style={{ display:"inline-flex", alignItems:"center", gap:"0.5rem", background:"rgba(0,122,138,0.12)", border:"1px solid rgba(0,180,200,0.3)", padding:"0.3rem 0.85rem", borderRadius:20, fontSize:"0.72rem", fontWeight:700, letterSpacing:1, textTransform:"uppercase", color:"var(--teal2)", marginBottom:"1.5rem" }}>
              <span style={{ width:6, height:6, borderRadius:"50%", background:"var(--teal2)", animation:"pulse 2s infinite" }}/>
              {t.hero.badge}
            </div>
            <h1 style={{ fontSize:"clamp(2rem,4vw,3.5rem)", fontWeight:800, lineHeight:1.1, letterSpacing:-1, marginBottom:"1.2rem" }}>
              {t.hero.h1a}<br/><GradText>{t.hero.h1b}</GradText>
            </h1>
            <p style={{ fontSize:"1rem", color:"rgba(255,255,255,0.6)", lineHeight:1.75, marginBottom:"2rem", maxWidth:480 }}>{t.hero.p}</p>
            <div style={{ display:"flex", gap:"1rem", flexWrap:"wrap" }}>
              <button onClick={()=>setPage("membership")} style={{ ...S.btn("primary","lg"), boxShadow:"0 4px 24px rgba(0,53,128,0.4)" }}>{t.hero.cta1} ‚Üí</button>
              <button onClick={()=>setPage("events")} style={S.btn("ghost","lg")}>{t.hero.cta2}</button>
            </div>
          </div>

          {/* Right: stat card */}
          <div style={{ opacity: visible?1:0, transform: visible?"none":"translateX(24px)", transition:"all 0.7s 0.3s" }}>
            <div style={{ background:"rgba(255,255,255,0.03)", border:"1px solid var(--border)", borderRadius:16, padding:"1.8rem", backdropFilter:"blur(10px)", position:"relative" }}>
              <div style={{ position:"absolute", top:0, left:0, right:0, height:2, background:"linear-gradient(90deg, var(--blue), var(--teal), var(--cork))", borderRadius:"16px 16px 0 0" }}/>
              <div style={{ fontSize:"0.65rem", fontWeight:700, letterSpacing:2, textTransform:"uppercase", color:"var(--muted)", marginBottom:"1.2rem" }}>Cap√≠tulo em n√∫meros</div>
              <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:"1rem", marginBottom:"1.5rem" }}>
                {[["240+","Membros ativos"],["18","Empresas CAB"],["32","Eventos 2025"],["4","Working Groups"]].map(([n,l])=>(
                  <div key={l} style={{ textAlign:"center" }}>
                    <div style={{ fontSize:"1.8rem", fontWeight:800, fontFamily:"'Syne',sans-serif", background:"linear-gradient(135deg, var(--teal2), var(--cork))", WebkitBackgroundClip:"text", WebkitTextFillColor:"transparent" }}>{n}</div>
                    <div style={{ fontSize:"0.72rem", color:"var(--muted)", marginTop:2 }}>{l}</div>
                  </div>
                ))}
              </div>
              <div style={{ background:"rgba(0,122,138,0.1)", border:"1px solid rgba(0,122,138,0.25)", borderRadius:8, padding:"0.9rem" }}>
                <div style={{ fontSize:"0.62rem", fontWeight:700, letterSpacing:2, textTransform:"uppercase", color:"var(--teal2)", marginBottom:"0.35rem" }}>‚ö° Pr√≥ximo evento</div>
                <div style={{ fontWeight:600, fontSize:"0.92rem", marginBottom:"0.25rem" }}>INCOSE Portugal Summit 2026</div>
                <div style={{ fontSize:"0.78rem", color:"var(--muted)" }}>15 de mar√ßo ¬∑ Lisboa ¬∑ Presencial + Online</div>
                <button onClick={()=>setPage("events")} style={{ ...S.btn("teal","sm"), marginTop:"0.7rem", fontSize:"0.75rem" }}>Inscrever ‚Üí</button>
              </div>
            </div>
          </div>
        </div>

        {/* Wave */}
        <div style={{ position:"absolute", bottom:0, left:0, right:0, height:80, opacity:0.12 }}>
          <svg viewBox="0 0 1440 80" preserveAspectRatio="none" style={{ width:"100%", height:"100%" }}>
            <path d="M0,40 C360,70 720,10 1080,40 C1260,55 1380,30 1440,40 L1440,80 L0,80Z" fill="#003580"/>
          </svg>
        </div>
      </section>

      {/* NEWS preview */}
      <section style={{ padding:"4rem 0", background:"#050c1a" }}>
        <div style={S.container}>
          <div style={{ display:"flex", alignItems:"flex-end", justifyContent:"space-between", marginBottom:"2rem" }}>
            <div>
              <p style={S.sectionLabel}>√öltimas not√≠cias</p>
              <h2 style={S.sectionTitle}>Acontece na <GradText>comunidade</GradText></h2>
            </div>
            <button onClick={()=>setPage("home")} style={S.btn("ghost","sm")}>Ver todas ‚Üí</button>
          </div>
          <div style={{ display:"grid", gridTemplateColumns:"2fr 1fr 1fr", gap:"1.2rem" }}>
            {NEWS_DATA.slice(0,3).map((n,i)=>(
              <div key={n.id} style={{ ...S.card(), padding:"1.2rem", cursor:"pointer" }} onMouseEnter={e=>e.currentTarget.style.borderColor="rgba(0,180,200,0.25)"} onMouseLeave={e=>e.currentTarget.style.borderColor="var(--border)"}>
                <div style={{ fontSize: i===0?"3rem":"2.2rem", marginBottom:"0.8rem" }}>{n.icon}</div>
                <Badge color="teal">{n.category}</Badge>
                <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize: i===0?"1.05rem":"0.9rem", margin:"0.5rem 0 0.4rem", lineHeight:1.35 }}>{n.title}</h3>
                {i===0 && <p style={{ fontSize:"0.83rem", color:"var(--muted)", lineHeight:1.6 }}>{n.excerpt}</p>}
                <div style={{ fontSize:"0.72rem", color:"rgba(255,255,255,0.3)", marginTop:"0.6rem" }}>{n.date}</div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* QUICK ACTIONS */}
      <section style={{ padding:"4rem 0" }}>
        <div style={S.container}>
          <div style={{ display:"grid", gridTemplateColumns:"repeat(4,1fr)", gap:"1rem" }}>
            {[
              { icon:"üéì", title:"Certifica√ß√£o CSEP/ASEP", sub:"Prep-courses e exames", page:"events", color:"var(--blue2)" },
              { icon:"üíº", title:"Job Board SE", sub:"Vagas em empresas CAB", page:"jobs", color:"var(--teal)" },
              { icon:"üìö", title:"Knowledge Base", sub:"Handbook, templates, webinars", page:"knowledge", color:"var(--cork)" },
              { icon:"ü§ù", title:"Working Groups", sub:"MBSE ¬∑ Defense ¬∑ Space", page:"about", color:"#6366f1" },
            ].map(item=>(
              <div key={item.title} onClick={()=>setPage(item.page)} style={{ ...S.card(), padding:"1.4rem", cursor:"pointer", textAlign:"center" }} onMouseEnter={e=>{ e.currentTarget.style.borderColor="rgba(255,255,255,0.15)"; e.currentTarget.style.transform="translateY(-3px)"; }} onMouseLeave={e=>{ e.currentTarget.style.borderColor="var(--border)"; e.currentTarget.style.transform="none"; }}>
                <div style={{ fontSize:"1.8rem", marginBottom:"0.7rem" }}>{item.icon}</div>
                <div style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.9rem", marginBottom:"0.25rem" }}>{item.title}</div>
                <div style={{ fontSize:"0.75rem", color:"var(--muted)" }}>{item.sub}</div>
              </div>
            ))}
          </div>
        </div>
      </section>
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ EVENTS PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const EventsPage = ({ user, onOpenAuth }) => {
  const [format, setFormat] = useState("all");
  const [type, setType] = useState("all");
  const [selected, setSelected] = useState(null);
  const [registered, setRegistered] = useState([]);

  const filtered = EVENTS_DATA.filter(e =>
    (format==="all" || e.format===format) &&
    (type==="all" || e.type===type)
  );

  const getPrice = (e) => {
    if (!user) return e.price.public;
    if (user.role==="student") return e.price.student;
    if (user.quota) return e.price.member;
    return e.price.public;
  };

  const register = (id) => {
    if (!user) { return; }
    setRegistered(r => r.includes(id) ? r : [...r, id]);
  };

  const typeMap = { summit:"Summit", webinar:"Webinar", workshop:"Workshop", wg:"Working Group" };
  const formatColor = { presencial:"cork", online:"teal" };

  return (
    <div style={{ padding:"3rem 0" }}>
      <div style={S.container}>
        <p style={S.sectionLabel}>Agenda</p>
        <h1 style={S.sectionTitle}>Pr√≥ximos <GradText>Eventos</GradText></h1>
        <p style={{ color:"var(--muted)", marginBottom:"2rem", fontSize:"0.92rem" }}>Membros com quota ativa t√™m desconto autom√°tico aplicado na inscri√ß√£o.</p>

        {/* Filters */}
        <div style={{ display:"flex", gap:"0.5rem", marginBottom:"2rem", flexWrap:"wrap", alignItems:"center" }}>
          <span style={{ fontSize:"0.75rem", color:"var(--muted)", marginRight:"0.3rem", fontWeight:600 }}>Formato:</span>
          {[["all","Todos"],["presencial","Presencial"],["online","Online"]].map(([v,l])=>(
            <button key={v} onClick={()=>setFormat(v)} style={{ ...S.btn(format===v?"teal":"ghost","sm") }}>{l}</button>
          ))}
          <span style={{ fontSize:"0.75rem", color:"var(--muted)", marginLeft:"0.5rem", marginRight:"0.3rem", fontWeight:600 }}>Tipo:</span>
          {[["all","Todos"],["summit","Summit"],["webinar","Webinar"],["workshop","Workshop"],["wg","Working Group"]].map(([v,l])=>(
            <button key={v} onClick={()=>setType(v)} style={{ ...S.btn(type===v?"teal":"ghost","sm") }}>{l}</button>
          ))}
        </div>

        {/* Events list */}
        <div style={{ display:"flex", flexDirection:"column", gap:"0.9rem" }}>
          {filtered.map(e => {
            const price = getPrice(e);
            const isRegistered = registered.includes(e.id);
            const d = new Date(e.date);
            return (
              <div key={e.id} style={{ ...S.card(), padding:"1.3rem 1.6rem", display:"flex", alignItems:"center", gap:"1.5rem" }} onMouseEnter={ev=>ev.currentTarget.style.borderColor="rgba(0,180,200,0.2)"} onMouseLeave={ev=>ev.currentTarget.style.borderColor="var(--border)"}>
                <div style={{ minWidth:52, textAlign:"center", background:"rgba(0,53,128,0.2)", border:"1px solid rgba(0,85,204,0.3)", borderRadius:8, padding:"0.5rem 0.3rem", flexShrink:0 }}>
                  <div style={{ fontSize:"1.4rem", fontWeight:800, fontFamily:"'Syne',sans-serif", lineHeight:1 }}>{d.getDate()}</div>
                  <div style={{ fontSize:"0.6rem", fontWeight:700, letterSpacing:1, textTransform:"uppercase", color:"var(--muted)" }}>{d.toLocaleString('pt',{month:'short'})}</div>
                </div>
                <div style={{ flex:1 }}>
                  <div style={{ display:"flex", gap:"0.4rem", marginBottom:"0.35rem", flexWrap:"wrap" }}>
                    <Badge color={formatColor[e.format]}>{e.format}</Badge>
                    <Badge color="blue">{typeMap[e.type]}</Badge>
                    {user?.quota && price < e.price.public && <Badge color="green">‚úì Pre√ßo de membro</Badge>}
                  </div>
                  <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.97rem", marginBottom:"0.2rem" }}>{e.title}</h3>
                  <p style={{ fontSize:"0.78rem", color:"var(--muted)" }}>{e.location}</p>
                </div>
                <div style={{ textAlign:"right", flexShrink:0 }}>
                  <div style={{ fontSize:"1.3rem", fontWeight:800, fontFamily:"'Syne',sans-serif", color: price===0 ? "var(--success)" : "#fff" }}>
                    {price===0 ? "Gr√°tis" : `${price}‚Ç¨`}
                  </div>
                  {user?.quota && price < e.price.public && <div style={{ fontSize:"0.65rem", color:"var(--muted)", textDecoration:"line-through" }}>{e.price.public}‚Ç¨</div>}
                  <div style={{ display:"flex", gap:"0.4rem", marginTop:"0.5rem", justifyContent:"flex-end" }}>
                    <button onClick={()=>setSelected(e)} style={S.btn("ghost","sm")}>Detalhes</button>
                    {isRegistered
                      ? <button style={S.btn("success","sm")}>‚úì Inscrito</button>
                      : <button onClick={()=> user ? register(e.id) : onOpenAuth()} style={S.btn("primary","sm")}>Inscrever</button>
                    }
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>

      {/* Event detail modal */}
      <Modal open={!!selected} onClose={()=>setSelected(null)} title={selected?.title || ""} width={540}>
        {selected && (
          <>
            <div style={{ display:"flex", gap:"0.4rem", marginBottom:"1rem", flexWrap:"wrap" }}>
              <Badge color={formatColor[selected.format]}>{selected.format}</Badge>
              <Badge color="blue">{typeMap[selected.type]}</Badge>
            </div>
            <p style={{ fontSize:"0.88rem", color:"rgba(255,255,255,0.7)", lineHeight:1.7, marginBottom:"1rem" }}>{selected.desc}</p>
            <TopBar>
              <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:"0.6rem", fontSize:"0.82rem" }}>
                <div><span style={{ color:"var(--muted)" }}>Data: </span>{selected.date}</div>
                <div><span style={{ color:"var(--muted)" }}>Local: </span>{selected.location}</div>
                <div><span style={{ color:"var(--muted)" }}>Vagas: </span>{selected.capacity - selected.registered} restantes</div>
                <div><span style={{ color:"var(--muted)" }}>Inscritos: </span>{selected.registered}</div>
              </div>
            </TopBar>
            <Divider/>
            <div style={{ marginBottom:"1rem" }}>
              <p style={{ fontSize:"0.75rem", fontWeight:600, color:"var(--muted)", letterSpacing:1, marginBottom:"0.5rem" }}>PRE√áOS</p>
              {[["P√∫blico geral", selected.price.public],["Membro ativo", selected.price.member],["Estudante", selected.price.student]].map(([l,p])=>(
                <div key={l} style={{ display:"flex", justifyContent:"space-between", fontSize:"0.85rem", padding:"0.3rem 0", borderBottom:"1px solid var(--border)" }}>
                  <span style={{ color:"var(--muted)" }}>{l}</span>
                  <strong style={{ color: p===0 ? "var(--success)" : "#fff" }}>{p===0?"Gr√°tis":`${p}‚Ç¨`}</strong>
                </div>
              ))}
            </div>
            <div style={{ display:"flex", gap:"0.6rem" }}>
              <button onClick={()=>{ register(selected.id); setSelected(null); }} style={{ ...S.btn(registered.includes(selected.id)?"success":"primary","md"), flex:1, justifyContent:"center" }}>
                {registered.includes(selected.id) ? "‚úì J√° inscrito" : "Inscrever agora"}
              </button>
              <button onClick={()=>{
                const ics = `BEGIN:VCALENDAR\nVERSION:2.0\nBEGIN:VEVENT\nSUMMARY:${selected.title}\nDTSTART:${selected.date.replace(/-/g,'')}T090000Z\nLOCATION:${selected.location}\nEND:VEVENT\nEND:VCALENDAR`;
                const b = new Blob([ics],{type:"text/calendar"}); const u=URL.createObjectURL(b); const a=document.createElement("a"); a.href=u; a.download="evento.ics"; a.click();
              }} style={S.btn("ghost","md")}>‚¨á .ics</button>
            </div>
          </>
        )}
      </Modal>
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ JOB BOARD PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const JobsPage = ({ user, onOpenAuth }) => {
  const [search, setSearch] = useState("");
  const [tag, setTag] = useState("all");
  const [applied, setApplied] = useState([]);
  const [newJob, setNewJob] = useState({ title:"", location:"", type:"Full-time", tags:"", desc:"" });
  const [showPost, setShowPost] = useState(false);
  const [jobs, setJobs] = useState(JOBS_DATA);

  const allTags = [...new Set(jobs.flatMap(j=>j.tags))];
  const filtered = jobs.filter(j =>
    (tag==="all" || j.tags.includes(tag)) &&
    (j.title.toLowerCase().includes(search.toLowerCase()) || j.company.toLowerCase().includes(search.toLowerCase()))
  );

  const apply = (id) => {
    if (!user?.quota) return;
    setApplied(a => a.includes(id) ? a : [...a, id]);
  };

  const postJob = () => {
    if (!newJob.title) return;
    setJobs(js => [{ ...newJob, id: Date.now(), logo: "NEW", tags: newJob.tags.split(",").map(t=>t.trim()), posted: new Date().toISOString().slice(0,10), cab: true }, ...js]);
    setNewJob({ title:"", location:"", type:"Full-time", tags:"", desc:"" });
    setShowPost(false);
  };

  return (
    <div style={{ padding:"3rem 0" }}>
      <div style={S.container}>
        <div style={{ display:"flex", justifyContent:"space-between", alignItems:"flex-start", marginBottom:"1rem", flexWrap:"wrap", gap:"1rem" }}>
          <div>
            <p style={S.sectionLabel}>Portal de Carreiras</p>
            <h1 style={S.sectionTitle}>Job Board <GradText>SE</GradText></h1>
            <p style={{ color:"var(--muted)", fontSize:"0.88rem" }}>Vagas publicadas por empresas CAB e parceiros. Candidatura 1-click para membros com perfil completo.</p>
          </div>
          {(user?.role==="cab" || user?.role==="admin") && (
            <button onClick={()=>setShowPost(true)} style={S.btn("teal","md")}>+ Publicar vaga</button>
          )}
        </div>

        {/* Search + filters */}
        <div style={{ display:"flex", gap:"0.8rem", marginBottom:"1.2rem", flexWrap:"wrap" }}>
          <input style={{ ...S.input, maxWidth:320, flex:1 }} placeholder="üîç Pesquisar cargo ou empresa..." value={search} onChange={e=>setSearch(e.target.value)} />
        </div>
        <div style={{ display:"flex", gap:"0.4rem", flexWrap:"wrap", marginBottom:"2rem" }}>
          <button onClick={()=>setTag("all")} style={S.btn(tag==="all"?"teal":"ghost","sm")}>Todas</button>
          {allTags.map(t=>(
            <button key={t} onClick={()=>setTag(t)} style={S.btn(tag===t?"teal":"ghost","sm")}>{t}</button>
          ))}
        </div>

        {/* CAB notice */}
        {!user && <Alert type="info">üîí Candidatura 1-click dispon√≠vel para membros com perfil completo. <button onClick={onOpenAuth} style={{ background:"none", border:"none", color:"var(--teal2)", cursor:"pointer", fontWeight:600, fontFamily:"inherit" }}>Fazer login ‚Üí</button></Alert>}
        {user && !user.quota && <Alert type="warn">‚ö† A sua quota est√° inativa. Renove a ades√£o para usar a candidatura 1-click.</Alert>}
        {user?.quota && <Alert type="success">‚úì Perfil ativo ‚Äì candidatura 1-click dispon√≠vel em todas as vagas.</Alert>}

        {/* Jobs grid */}
        <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:"1rem", marginTop:"1.2rem" }}>
          {filtered.map(j=>(
            <div key={j.id} style={{ ...S.card(), padding:"1.3rem" }} onMouseEnter={e=>e.currentTarget.style.borderColor="rgba(0,180,200,0.2)"} onMouseLeave={e=>e.currentTarget.style.borderColor="var(--border)"}>
              <div style={{ display:"flex", gap:"0.9rem", marginBottom:"0.8rem" }}>
                <div style={{ width:42, height:42, borderRadius:8, background:"rgba(0,53,128,0.3)", border:"1px solid rgba(0,85,204,0.2)", display:"flex", alignItems:"center", justifyContent:"center", fontSize:"0.7rem", fontWeight:800, color:"var(--teal2)", flexShrink:0 }}>{j.logo}</div>
                <div>
                  <h4 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.92rem", marginBottom:"0.15rem" }}>{j.title}</h4>
                  <div style={{ fontSize:"0.78rem", color:"var(--muted)" }}>{j.company} ¬∑ {j.location}</div>
                </div>
              </div>
              <p style={{ fontSize:"0.8rem", color:"rgba(255,255,255,0.55)", lineHeight:1.55, marginBottom:"0.8rem" }}>{j.desc}</p>
              <div style={{ display:"flex", gap:"0.35rem", flexWrap:"wrap", marginBottom:"0.8rem" }}>
                {j.tags.map(t=><span key={t} style={S.tag()}>{t}</span>)}
                <span style={S.tag(j.type==="Full-time"?"blue":"cork")}>{j.type}</span>
              </div>
              <div style={{ display:"flex", alignItems:"center", justifyContent:"space-between" }}>
                <span style={{ fontSize:"0.68rem", color:"rgba(255,255,255,0.25)" }}>Publicado: {j.posted}</span>
                {applied.includes(j.id)
                  ? <button style={S.btn("success","sm")}>‚úì Candidatura enviada</button>
                  : <button onClick={()=> user?.quota ? apply(j.id) : onOpenAuth()} style={S.btn(user?.quota?"primary":"ghost","sm")}>
                      {user?.quota ? "1-Click Apply ‚ö°" : "Candidatar ‚Üí"}
                    </button>
                }
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Post job modal */}
      <Modal open={showPost} onClose={()=>setShowPost(false)} title="Publicar nova vaga" width={500}>
        {[["T√≠tulo do cargo","title","text"],["Localiza√ß√£o","location","text"],["Tags (separadas por v√≠rgula)","tags","text"]].map(([l,k,t])=>(
          <div key={k} style={{ marginBottom:"0.8rem" }}>
            <label style={S.label}>{l}</label>
            <input style={S.input} type={t} value={newJob[k]} onChange={e=>setNewJob({...newJob,[k]:e.target.value})} />
          </div>
        ))}
        <div style={{ marginBottom:"0.8rem" }}>
          <label style={S.label}>Tipo</label>
          <select style={{ ...S.input }} value={newJob.type} onChange={e=>setNewJob({...newJob,type:e.target.value})}>
            {["Full-time","Part-time","Contrato","Bolsa FCT","Est√°gio"].map(o=><option key={o}>{o}</option>)}
          </select>
        </div>
        <div style={{ marginBottom:"1rem" }}>
          <label style={S.label}>Descri√ß√£o</label>
          <textarea style={{ ...S.input, height:90, resize:"vertical" }} value={newJob.desc} onChange={e=>setNewJob({...newJob,desc:e.target.value})} />
        </div>
        <Alert type="warn">‚è≥ A vaga ficar√° pendente at√© aprova√ß√£o pelo Admin.</Alert>
        <button onClick={postJob} style={{ ...S.btn("primary","md"), width:"100%", justifyContent:"center", marginTop:"1rem" }}>Submeter para aprova√ß√£o ‚Üí</button>
      </Modal>
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ KNOWLEDGE PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const KnowledgePage = ({ user, onOpenAuth }) => {
  const [cat, setCat] = useState("all");
  const [search, setSearch] = useState("");
  const cats = ["all","handbook","template","webinar","guide","legal"];
  const catLabels = { all:"Todos", handbook:"Handbook", template:"Templates", webinar:"Webinars", guide:"Guias", legal:"Legal / Estatutos" };
  const filtered = DOCS_DATA.filter(d =>
    (cat==="all" || d.category===cat) &&
    d.title.toLowerCase().includes(search.toLowerCase())
  );
  const canAccess = (doc) => !doc.restricted || (user?.quota);

  return (
    <div style={{ padding:"3rem 0" }}>
      <div style={S.container}>
        <p style={S.sectionLabel}>Biblioteca</p>
        <h1 style={S.sectionTitle}>Knowledge <GradText>Base</GradText></h1>
        <p style={{ color:"var(--muted)", marginBottom:"2rem", fontSize:"0.88rem" }}>Recursos t√©cnicos exclusivos para membros com quota ativa. Documentos p√∫blicos dispon√≠veis para todos.</p>

        {!user && <div style={{ marginBottom:"1.5rem" }}><Alert type="warn">üîí Os materiais t√©cnicos (Handbook, templates, webinars) requerem login e quota ativa. <button onClick={onOpenAuth} style={{ background:"none", border:"none", color:"var(--teal2)", cursor:"pointer", fontWeight:600, fontFamily:"inherit" }}>Entrar ‚Üí</button></Alert></div>}
        {user && !user.quota && <div style={{ marginBottom:"1.5rem" }}><Alert type="warn">‚ö† A sua quota est√° inativa. Renove a ades√£o para aceder aos materiais t√©cnicos.</Alert></div>}
        {user?.quota && <div style={{ marginBottom:"1.5rem" }}><Alert type="success">‚úì Acesso completo ‚Äì quota ativa at√© dezembro 2026.</Alert></div>}

        {/* Search + cats */}
        <div style={{ display:"flex", gap:"0.8rem", marginBottom:"1rem", flexWrap:"wrap" }}>
          <input style={{ ...S.input, maxWidth:300, flex:1 }} placeholder="üîç Pesquisar..." value={search} onChange={e=>setSearch(e.target.value)} />
        </div>
        <div style={{ display:"flex", gap:"0.4rem", flexWrap:"wrap", marginBottom:"2rem" }}>
          {cats.map(c=><button key={c} onClick={()=>setCat(c)} style={S.btn(cat===c?"teal":"ghost","sm")}>{catLabels[c]}</button>)}
        </div>

        {/* Docs grid */}
        <div style={{ display:"grid", gridTemplateColumns:"repeat(3,1fr)", gap:"1rem" }}>
          {filtered.map(d=>{
            const access = canAccess(d);
            return (
              <div key={d.id} style={{ ...S.card(), padding:"1.2rem", opacity: access ? 1 : 0.6 }} onMouseEnter={e=>e.currentTarget.style.borderColor= access ? "rgba(0,180,200,0.2)" : "var(--border)"} onMouseLeave={e=>e.currentTarget.style.borderColor="var(--border)"}>
                <div style={{ fontSize:"2rem", marginBottom:"0.7rem" }}>{d.icon}</div>
                <div style={{ display:"flex", gap:"0.35rem", marginBottom:"0.5rem" }}>
                  <Badge color="blue">{d.type}</Badge>
                  {d.restricted && <Badge color={access?"green":"warn"}>{access?"‚úì Acesso":"üîí Membros"}</Badge>}
                </div>
                <h4 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.88rem", marginBottom:"0.25rem", lineHeight:1.3 }}>{d.title}</h4>
                <p style={{ fontSize:"0.72rem", color:"var(--muted)", marginBottom:"0.8rem" }}>{d.size} ¬∑ {d.date}</p>
                {access
                  ? <button style={S.btn("primary","sm")}>‚¨á Download</button>
                  : <button onClick={onOpenAuth} style={S.btn("ghost","sm")}>üîí {user ? "Renovar quota" : "Fazer login"}</button>
                }
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ MEMBERSHIP PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const MembershipPage = ({ user, onOpenAuth }) => (
  <div style={{ padding:"3rem 0" }}>
    <div style={S.container}>
      <p style={S.sectionLabel}>Seja s√≥cio</p>
      <h1 style={S.sectionTitle}>Planos de <GradText>Ades√£o</GradText></h1>
      <p style={{ color:"var(--muted)", marginBottom:"3rem", fontSize:"0.92rem", maxWidth:560 }}>
        Fa√ßa parte da comunidade portuguesa de Systems Engineering. Acesso imediato aos recursos, descontos e representa√ß√£o internacional.
      </p>

      <div style={{ display:"grid", gridTemplateColumns:"repeat(3,1fr)", gap:"1.5rem", marginBottom:"2rem" }}>
        {[
          { name:"Membro Estudante", price:30, period:"/ano", color:"var(--muted)", desc:"Estudante de universidade portuguesa", benefits:["Acesso √† biblioteca","Desconto em eventos","Webinars gravados","Certificate Wallet","Member Directory (opt-in)"] },
          { name:"Membro Individual", price:80, period:"/ano", color:"var(--teal2)", desc:"Profissional de SE", featured:true, benefits:["Tudo do Estudante","F√≥rum privado","Voto nas elei√ß√µes","Desconto acrescido em forma√ß√µes","Acesso ao IS internacional"] },
          { name:"CAB ‚Äì Corporate", price:800, period:"/ano", color:"var(--cork)", desc:"Empresa ¬∑ 5 seats inclu√≠dos", benefits:["5 membros inclu√≠dos","Perfil empresa no site","Publicar vagas (Job Board)","Reposit√≥rio doc. estrat√©gicos","Presence no Summit anual"] },
        ].map(plan=>(
          <div key={plan.name} style={{ ...S.card(), padding:"1.8rem", border: plan.featured ? "1px solid rgba(0,180,200,0.4)" : "1px solid var(--border)", position:"relative" }}>
            {plan.featured && <div style={{ position:"absolute", top:"-11px", left:"50%", transform:"translateX(-50%)", background:"var(--teal)", padding:"0.15rem 0.8rem", borderRadius:10, fontSize:"0.65rem", fontWeight:700, letterSpacing:1, textTransform:"uppercase" }}>Mais popular</div>}
            <div style={{ fontSize:"0.75rem", fontWeight:600, color:"var(--muted)", marginBottom:"0.4rem", letterSpacing:0.5 }}>{plan.desc}</div>
            <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:800, fontSize:"1.1rem", marginBottom:"1rem" }}>{plan.name}</h3>
            <div style={{ marginBottom:"1.2rem" }}>
              <span style={{ fontSize:"2.2rem", fontWeight:800, fontFamily:"'Syne',sans-serif", color:plan.color }}>{plan.price}‚Ç¨</span>
              <span style={{ fontSize:"0.8rem", color:"var(--muted)" }}>{plan.period}</span>
            </div>
            <ul style={{ listStyle:"none", marginBottom:"1.5rem" }}>
              {plan.benefits.map(b=>(
                <li key={b} style={{ fontSize:"0.82rem", color:"rgba(255,255,255,0.75)", padding:"0.25rem 0", borderBottom:"1px solid var(--border)", display:"flex", alignItems:"center", gap:"0.5rem" }}>
                  <span style={{ color:"var(--teal2)", fontSize:"0.7rem" }}>‚úì</span> {b}
                </li>
              ))}
            </ul>
            <button onClick={onOpenAuth} style={{ ...S.btn(plan.featured?"teal":"ghost","md"), width:"100%", justifyContent:"center" }}>
              Aderir agora ‚Üí
            </button>
          </div>
        ))}
      </div>

      <TopBar>
        <p style={{ fontSize:"0.82rem", color:"var(--muted)", textAlign:"center" }}>
          ‚ÑπÔ∏è As quotas internacionais INCOSE s√£o pagas separadamente em{" "}
          <a href="https://www.incose.org" target="_blank" style={{ color:"var(--teal2)" }}>incose.org ‚Üó</a>.
          A SESPT (NIF a inserir) emite fatura nos termos legais portugueses.
        </p>
      </TopBar>
    </div>
  </div>
);

// ‚îÄ‚îÄ‚îÄ DASHBOARD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const DashboardPage = ({ user, onOpenAuth }) => {
  const [tab, setTab] = useState("overview");
  if (!user) return (
    <div style={{ padding:"4rem 2rem", textAlign:"center" }}>
      <div style={{ fontSize:"3rem", marginBottom:"1rem" }}>üîí</div>
      <h2 style={{ fontFamily:"'Syne',sans-serif", marginBottom:"0.5rem" }}>√Årea privada</h2>
      <p style={{ color:"var(--muted)", marginBottom:"1.5rem" }}>Fa√ßa login para aceder ao seu dashboard.</p>
      <button onClick={onOpenAuth} style={S.btn("primary","lg")}>Entrar ‚Üí</button>
    </div>
  );

  const tabs = [
    { key:"overview", label:"Resumo" },
    { key:"profile", label:"Perfil" },
    { key:"payments", label:"Pagamentos" },
    { key:"wallet", label:"Certificate Wallet" },
  ];

  const certs = [
    { name:"INCOSE Portugal Summit 2025 ‚Äì Participa√ß√£o", date:"2025-11-15", id:"CERT-2025-001" },
    { name:"ASEP Prep-Course ‚Äì Dezembro 2025", date:"2025-12-08", id:"CERT-2025-002" },
    { name:"Webinar MBSE Intro ‚Äì Novembro 2025", date:"2025-11-28", id:"CERT-2025-003" },
  ];

  const payments = [
    { desc:"Quota anual 2026 ‚Äì Membro Individual", amount:"80.00", date:"2026-01-10", status:"pago" },
    { desc:"Quota anual 2025 ‚Äì Membro Individual", amount:"80.00", date:"2025-01-12", status:"pago" },
    { desc:"Summit 2025 ‚Äì Bilhete membro", amount:"60.00", date:"2025-10-20", status:"pago" },
  ];

  return (
    <div style={{ padding:"2.5rem 0" }}>
      <div style={S.container}>
        {/* Header */}
        <div style={{ display:"flex", alignItems:"center", gap:"1.2rem", marginBottom:"2rem" }}>
          <div style={{ width:56, height:56, borderRadius:"50%", background:"linear-gradient(135deg, var(--blue), var(--teal))", display:"flex", alignItems:"center", justifyContent:"center", fontSize:"1.3rem", fontWeight:800, fontFamily:"'Syne',sans-serif" }}>{user.avatar}</div>
          <div>
            <h1 style={{ fontFamily:"'Syne',sans-serif", fontSize:"1.5rem", fontWeight:800 }}>Ol√°, {user.name.split(" ")[0]}!</h1>
            <div style={{ display:"flex", gap:"0.5rem", marginTop:"0.3rem" }}>
              <Badge color="blue">{user.type}</Badge>
              <Badge color={user.quota?"green":"warn"}>{user.quota?"‚úì Quota ativa 2026":"‚ö† Quota inativa"}</Badge>
            </div>
          </div>
        </div>

        {/* Tabs */}
        <div style={{ display:"flex", gap:0, borderBottom:"1px solid var(--border)", marginBottom:"2rem" }}>
          {tabs.map(t=>(
            <button key={t.key} onClick={()=>setTab(t.key)} style={{ background:"transparent", border:"none", borderBottom: tab===t.key ? "2px solid var(--teal2)" : "2px solid transparent", padding:"0.6rem 1.2rem", color: tab===t.key ? "#fff" : "var(--muted)", cursor:"pointer", fontFamily:"'DM Sans',sans-serif", fontWeight:600, fontSize:"0.85rem", transition:"all 0.2s" }}>{t.label}</button>
          ))}
        </div>

        {/* Overview tab */}
        {tab==="overview" && (
          <div>
            <div style={{ display:"grid", gridTemplateColumns:"repeat(4,1fr)", gap:"1rem", marginBottom:"2rem" }}>
              {[["3","Certificados","üèÖ"],["2","Eventos inscritos","üìÖ"],["5","Docs transferidos","üì•"],[user.quota?"Ativo":"Inativo","Estado da quota","üîë"]].map(([v,l,i])=>(
                <div key={l} style={{ ...S.card(false), padding:"1.2rem", textAlign:"center" }}>
                  <div style={{ fontSize:"1.6rem", marginBottom:"0.3rem" }}>{i}</div>
                  <div style={{ fontFamily:"'Syne',sans-serif", fontSize:"1.3rem", fontWeight:800, marginBottom:"0.2rem", color: l==="Estado da quota" ? (user.quota?"var(--success)":"var(--warn)") : "#fff" }}>{v}</div>
                  <div style={{ fontSize:"0.72rem", color:"var(--muted)" }}>{l}</div>
                </div>
              ))}
            </div>
            {!user.quota && <Alert type="warn">‚ö† A sua quota anual expirou. Renove para manter acesso a todos os benef√≠cios.</Alert>}
          </div>
        )}

        {/* Profile tab */}
        {tab==="profile" && (
          <div style={{ maxWidth:520 }}>
            {[["Nome completo","name",user.name],["Email","email",user.email],["Tipo de membro","type",user.type],["N.¬∫ s√≥cio INCOSE","incose","INC-PT-00342"]].map(([l,k,v])=>(
              <div key={k} style={{ marginBottom:"1rem" }}>
                <label style={S.label}>{l}</label>
                <input style={S.input} defaultValue={v} readOnly={k==="incose"} />
              </div>
            ))}
            <div style={{ marginBottom:"1rem" }}>
              <label style={S.label}>Opt-in Member Directory</label>
              <div style={{ display:"flex", alignItems:"center", gap:"0.6rem", marginTop:"0.3rem" }}>
                <input type="checkbox" defaultChecked style={{ accentColor:"var(--teal)" }}/>
                <span style={{ fontSize:"0.83rem", color:"rgba(255,255,255,0.7)" }}>Vis√≠vel para outros membros no diret√≥rio</span>
              </div>
            </div>
            <div style={{ marginBottom:"1.5rem" }}>
              <label style={S.label}>CV / Curr√≠culo (para 1-Click Apply)</label>
              <div style={{ ...S.card(false), padding:"1rem", textAlign:"center", borderStyle:"dashed" }}>
                <p style={{ fontSize:"0.82rem", color:"var(--muted)" }}>Arraste o CV aqui ou clique para fazer upload</p>
                <button style={{ ...S.btn("ghost","sm"), marginTop:"0.5rem" }}>‚¨Ü Upload PDF</button>
              </div>
            </div>
            <button style={S.btn("primary","md")}>Guardar altera√ß√µes</button>
          </div>
        )}

        {/* Payments tab */}
        {tab==="payments" && (
          <div>
            <table style={{ width:"100%", borderCollapse:"collapse", fontSize:"0.85rem" }}>
              <thead>
                <tr style={{ borderBottom:"1px solid var(--border)" }}>
                  {["Descri√ß√£o","Valor","Data","Estado",""].map(h=><th key={h} style={{ padding:"0.6rem 0.8rem", textAlign:"left", fontSize:"0.7rem", fontWeight:700, letterSpacing:1, textTransform:"uppercase", color:"var(--muted)" }}>{h}</th>)}
                </tr>
              </thead>
              <tbody>
                {payments.map((p,i)=>(
                  <tr key={i} style={{ borderBottom:"1px solid var(--border)" }}>
                    <td style={{ padding:"0.8rem", color:"rgba(255,255,255,0.85)" }}>{p.desc}</td>
                    <td style={{ padding:"0.8rem", fontWeight:700 }}>{p.amount}‚Ç¨</td>
                    <td style={{ padding:"0.8rem", color:"var(--muted)" }}>{p.date}</td>
                    <td style={{ padding:"0.8rem" }}><Badge color="green">‚úì {p.status}</Badge></td>
                    <td style={{ padding:"0.8rem" }}><button style={S.btn("ghost","sm")}>Fatura</button></td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        )}

        {/* Certificate Wallet tab */}
        {tab==="wallet" && (
          <div>
            <p style={{ color:"var(--muted)", marginBottom:"1.5rem", fontSize:"0.88rem" }}>Certificados gerados automaticamente ap√≥s check-in em eventos.</p>
            <div style={{ display:"flex", flexDirection:"column", gap:"0.8rem" }}>
              {certs.map(c=>(
                <div key={c.id} style={{ ...S.card(false), padding:"1.1rem 1.4rem", display:"flex", alignItems:"center", gap:"1rem" }}>
                  <div style={{ fontSize:"1.8rem" }}>üèÖ</div>
                  <div style={{ flex:1 }}>
                    <h4 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.9rem" }}>{c.name}</h4>
                    <p style={{ fontSize:"0.75rem", color:"var(--muted)" }}>{c.date} ¬∑ {c.id}</p>
                  </div>
                  <button style={S.btn("ghost","sm")}>‚¨á PDF</button>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ ADMIN / BACKOFFICE PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const AdminPage = ({ user }) => {
  const [tab, setTab] = useState("news");
  const [newsItems, setNewsItems] = useState(NEWS_DATA);
  const [newArticle, setNewArticle] = useState({ title:"", category:"Destaque", excerpt:"", icon:"üì∞" });
  const [pendingJobs] = useState([
    { id:99, title:"Systems Engineer Jr.", company:"Nova empresa Lda.", status:"pending" },
  ]);
  const [users] = useState(Object.entries(USERS_DB).map(([email,u])=>({ email,...u })));

  if (!user || user.role !== "admin") return (
    <div style={{ padding:"4rem 2rem", textAlign:"center" }}>
      <div style={{ fontSize:"3rem", marginBottom:"1rem" }}>üö´</div>
      <h2 style={{ fontFamily:"'Syne',sans-serif" }}>Acesso restrito</h2>
      <p style={{ color:"var(--muted)", marginTop:"0.5rem" }}>Apenas administradores SESPT t√™m acesso ao backoffice.</p>
    </div>
  );

  const addArticle = () => {
    if (!newArticle.title) return;
    setNewsItems(n => [{ ...newArticle, id: Date.now(), date: new Date().toISOString().slice(0,10), pinned:false }, ...n]);
    setNewArticle({ title:"", category:"Destaque", excerpt:"", icon:"üì∞" });
  };

  const deleteArticle = (id) => setNewsItems(n => n.filter(a => a.id !== id));

  const tabs = [
    { key:"news", label:"üì∞ Not√≠cias" },
    { key:"jobs", label:"üíº Vagas pendentes" },
    { key:"users", label:"üë• Utilizadores" },
    { key:"newsletter", label:"‚úâ Newsletter" },
  ];

  return (
    <div style={{ padding:"2.5rem 0" }}>
      <div style={S.container}>
        <div style={{ marginBottom:"1.5rem" }}>
          <p style={S.sectionLabel}>Administra√ß√£o SESPT</p>
          <h1 style={S.sectionTitle}>Back<GradText>office</GradText></h1>
        </div>

        {/* Stats row */}
        <div style={{ display:"grid", gridTemplateColumns:"repeat(4,1fr)", gap:"1rem", marginBottom:"2rem" }}>
          {[["240","Membros ativos","üë•"],["18","Empresas CAB","üè¢"],["1","Vagas pendentes","‚è≥"],["4","Eventos futuros","üìÖ"]].map(([v,l,i])=>(
            <div key={l} style={{ ...S.card(false), padding:"1rem", display:"flex", gap:"0.8rem", alignItems:"center" }}>
              <div style={{ fontSize:"1.6rem" }}>{i}</div>
              <div>
                <div style={{ fontFamily:"'Syne',sans-serif", fontSize:"1.4rem", fontWeight:800 }}>{v}</div>
                <div style={{ fontSize:"0.72rem", color:"var(--muted)" }}>{l}</div>
              </div>
            </div>
          ))}
        </div>

        {/* Tabs */}
        <div style={{ display:"flex", gap:0, borderBottom:"1px solid var(--border)", marginBottom:"2rem" }}>
          {tabs.map(t=>(
            <button key={t.key} onClick={()=>setTab(t.key)} style={{ background:"transparent", border:"none", borderBottom: tab===t.key ? "2px solid var(--teal2)" : "2px solid transparent", padding:"0.6rem 1.2rem", color: tab===t.key ? "#fff" : "var(--muted)", cursor:"pointer", fontFamily:"'DM Sans',sans-serif", fontWeight:600, fontSize:"0.85rem", transition:"all 0.2s" }}>{t.label}</button>
          ))}
        </div>

        {/* News CMS */}
        {tab==="news" && (
          <div>
            <div style={{ ...S.card(false), padding:"1.5rem", marginBottom:"1.5rem" }}>
              <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, marginBottom:"1rem" }}>Criar novo artigo</h3>
              <div style={{ display:"grid", gridTemplateColumns:"2fr 1fr 0.5fr", gap:"0.8rem", marginBottom:"0.8rem" }}>
                <div>
                  <label style={S.label}>T√≠tulo *</label>
                  <input style={S.input} value={newArticle.title} onChange={e=>setNewArticle({...newArticle,title:e.target.value})} placeholder="T√≠tulo do artigo..." />
                </div>
                <div>
                  <label style={S.label}>Categoria</label>
                  <select style={{ ...S.input }} value={newArticle.category} onChange={e=>setNewArticle({...newArticle,category:e.target.value})}>
                    {["Destaque","CAB","Certifica√ß√£o","Internacional","Eventos"].map(c=><option key={c}>{c}</option>)}
                  </select>
                </div>
                <div>
                  <label style={S.label}>√çcone</label>
                  <input style={S.input} value={newArticle.icon} onChange={e=>setNewArticle({...newArticle,icon:e.target.value})} maxLength={2} />
                </div>
              </div>
              <div style={{ marginBottom:"1rem" }}>
                <label style={S.label}>Resumo / Excerpt</label>
                <textarea style={{ ...S.input, height:80, resize:"vertical" }} value={newArticle.excerpt} onChange={e=>setNewArticle({...newArticle,excerpt:e.target.value})} placeholder="Breve descri√ß√£o da not√≠cia..." />
              </div>
              <button onClick={addArticle} style={S.btn("teal","md")}>Publicar artigo ‚Üí</button>
            </div>

            <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, marginBottom:"1rem" }}>Artigos publicados</h3>
            <div style={{ display:"flex", flexDirection:"column", gap:"0.7rem" }}>
              {newsItems.map(n=>(
                <div key={n.id} style={{ ...S.card(false), padding:"1rem 1.3rem", display:"flex", alignItems:"center", gap:"1rem" }}>
                  <div style={{ fontSize:"1.4rem" }}>{n.icon}</div>
                  <div style={{ flex:1 }}>
                    <div style={{ display:"flex", gap:"0.4rem", marginBottom:"0.25rem" }}>
                      <Badge color="teal">{n.category}</Badge>
                      {n.pinned && <Badge color="cork">üìå Destaque</Badge>}
                    </div>
                    <h4 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.88rem" }}>{n.title}</h4>
                    <p style={{ fontSize:"0.72rem", color:"var(--muted)" }}>{n.date}</p>
                  </div>
                  <div style={{ display:"flex", gap:"0.4rem" }}>
                    <button style={S.btn("ghost","sm")}>‚úè Editar</button>
                    <button onClick={()=>deleteArticle(n.id)} style={S.btn("danger","sm")}>üóë Apagar</button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Pending jobs */}
        {tab==="jobs" && (
          <div>
            <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, marginBottom:"1rem" }}>Vagas aguardando aprova√ß√£o</h3>
            {pendingJobs.length === 0 ? <p style={{ color:"var(--muted)" }}>Sem vagas pendentes.</p> : pendingJobs.map(j=>(
              <div key={j.id} style={{ ...S.card(false), padding:"1.2rem 1.4rem", display:"flex", alignItems:"center", gap:"1rem", marginBottom:"0.7rem" }}>
                <div style={{ flex:1 }}>
                  <h4 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.9rem" }}>{j.title}</h4>
                  <p style={{ fontSize:"0.78rem", color:"var(--muted)" }}>{j.company}</p>
                </div>
                <Badge color="warn">‚è≥ Pendente</Badge>
                <button style={S.btn("success","sm")}>‚úì Aprovar</button>
                <button style={S.btn("danger","sm")}>‚úï Rejeitar</button>
              </div>
            ))}
          </div>
        )}

        {/* Users */}
        {tab==="users" && (
          <div>
            <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, marginBottom:"1rem" }}>Gest√£o de utilizadores</h3>
            <table style={{ width:"100%", borderCollapse:"collapse", fontSize:"0.83rem" }}>
              <thead>
                <tr style={{ borderBottom:"1px solid var(--border)" }}>
                  {["Nome","Email","Tipo","Quota","A√ß√µes"].map(h=><th key={h} style={{ padding:"0.6rem 0.8rem", textAlign:"left", fontSize:"0.68rem", fontWeight:700, letterSpacing:1, textTransform:"uppercase", color:"var(--muted)" }}>{h}</th>)}
                </tr>
              </thead>
              <tbody>
                {users.map(u=>(
                  <tr key={u.email} style={{ borderBottom:"1px solid var(--border)" }}>
                    <td style={{ padding:"0.8rem" }}><div style={{ display:"flex", alignItems:"center", gap:"0.6rem" }}><div style={{ width:28, height:28, borderRadius:"50%", background:"var(--teal)", display:"flex", alignItems:"center", justifyContent:"center", fontSize:"0.7rem", fontWeight:800 }}>{u.avatar}</div>{u.name}</div></td>
                    <td style={{ padding:"0.8rem", color:"var(--muted)" }}>{u.email}</td>
                    <td style={{ padding:"0.8rem" }}><Badge color="blue">{u.type}</Badge></td>
                    <td style={{ padding:"0.8rem" }}><Badge color={u.quota?"green":"warn"}>{u.quota?"Ativa":"Inativa"}</Badge></td>
                    <td style={{ padding:"0.8rem" }}><button style={S.btn("ghost","sm")}>Gerir</button></td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        )}

        {/* Newsletter */}
        {tab==="newsletter" && (
          <div style={{ maxWidth:600 }}>
            <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, marginBottom:"1rem" }}>Gerador de Newsletter</h3>
            <p style={{ fontSize:"0.85rem", color:"var(--muted)", marginBottom:"1.5rem" }}>Selecione not√≠cias ‚Üí Gera HTML autom√°tico pronto para Mailchimp.</p>
            <div style={{ display:"flex", flexDirection:"column", gap:"0.6rem", marginBottom:"1.5rem" }}>
              {NEWS_DATA.map(n=>(
                <label key={n.id} style={{ ...S.card(false), padding:"0.9rem 1.1rem", display:"flex", alignItems:"center", gap:"0.8rem", cursor:"pointer" }}>
                  <input type="checkbox" style={{ accentColor:"var(--teal)" }} />
                  <span style={{ fontSize:"0.88rem" }}>{n.icon} {n.title}</span>
                </label>
              ))}
            </div>
            <div style={{ display:"flex", gap:"0.7rem" }}>
              <button style={S.btn("teal","md")}>‚ö° Gerar HTML Newsletter</button>
              <button style={S.btn("ghost","md")}>üì§ Enviar via Mailchimp</button>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ ABOUT PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const AboutPage = () => (
  <div style={{ padding:"3rem 0" }}>
    <div style={S.container}>
      <p style={S.sectionLabel}>Quem somos</p>
      <h1 style={S.sectionTitle}>Sobre o <GradText>Cap√≠tulo</GradText></h1>
      <div style={{ display:"grid", gridTemplateColumns:"2fr 1fr", gap:"3rem", marginTop:"2rem" }}>
        <div>
          <p style={{ color:"rgba(255,255,255,0.75)", lineHeight:1.8, marginBottom:"1.2rem", fontSize:"0.95rem" }}>
            O INCOSE Portugal √© o cap√≠tulo oficial da International Council on Systems Engineering em Portugal. 
            Representado legalmente pela <strong style={{ color:"var(--teal2)" }}>SESPT ‚Äì Sociedade de Engenharia de Sistemas de Portugal</strong>, 
            o cap√≠tulo re√∫ne profissionais, acad√©micos e empresas comprometidos com a excel√™ncia em Engenharia de Sistemas.
          </p>
          <p style={{ color:"rgba(255,255,255,0.75)", lineHeight:1.8, marginBottom:"1.5rem", fontSize:"0.95rem" }}>
            Fundado em 2025, o cap√≠tulo cresceu rapidamente para mais de 240 membros e 18 empresas parceiras CAB, 
            tornando-se um polo de refer√™ncia na comunidade europeia de SE.
          </p>
          <h3 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, marginBottom:"1rem" }}>Working Groups ativos</h3>
          <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:"0.8rem" }}>
            {[["üèóÔ∏è","MBSE & SysML v2","Modela√ß√£o de sistemas complexos"],["üõ°Ô∏è","Defense Systems","Sistemas de defesa e seguran√ßa"],["üöÄ","Space Systems","Projetos espaciais ECSS"],["üå±","Sustainability in SE","SE aplicado √† sustentabilidade"]].map(([i,t,d])=>(
              <div key={t} style={{ ...S.card(false), padding:"1rem" }}>
                <div style={{ fontSize:"1.4rem", marginBottom:"0.4rem" }}>{i}</div>
                <div style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.85rem", marginBottom:"0.2rem" }}>{t}</div>
                <div style={{ fontSize:"0.75rem", color:"var(--muted)" }}>{d}</div>
              </div>
            ))}
          </div>
        </div>
        <div>
          <div style={{ ...S.card(false), padding:"1.5rem", marginBottom:"1rem" }}>
            <h4 style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, marginBottom:"1rem" }}>Dire√ß√£o SESPT</h4>
            {[["Sofia Andrade","Presidente"],["Jo√£o Figueiredo","Vice-Presidente"],["Marta Costa","Tesoureira"],["Pedro Nunes","Secret√°rio"]].map(([n,r])=>(
              <div key={n} style={{ display:"flex", justifyContent:"space-between", padding:"0.4rem 0", borderBottom:"1px solid var(--border)", fontSize:"0.83rem" }}>
                <span style={{ fontWeight:600 }}>{n}</span>
                <span style={{ color:"var(--muted)" }}>{r}</span>
              </div>
            ))}
          </div>
          <TopBar>
            <p style={{ fontSize:"0.78rem", color:"var(--muted)", lineHeight:1.6 }}>
              <strong style={{ color:"rgba(255,255,255,0.6)" }}>Identifica√ß√£o legal:</strong><br/>
              SESPT ‚Äì Sociedade de Engenharia de Sistemas de Portugal<br/>
              NIF: [inserir n√∫mero]<br/>
              Sede: Lisboa, Portugal
            </p>
          </TopBar>
        </div>
      </div>
    </div>
  </div>
);

// ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const Footer = ({ lang }) => {
  const t = T[lang];
  return (
    <footer style={{ background:"#030810", borderTop:"1px solid var(--border)", marginTop:"auto" }}>
      <div style={{ maxWidth:1200, margin:"0 auto", padding:"3rem 2rem 1.5rem", display:"grid", gridTemplateColumns:"2fr 1fr 1fr 1fr", gap:"2.5rem" }}>
        <div>
          <div style={{ display:"flex", alignItems:"center", gap:"0.7rem", marginBottom:"0.8rem" }}>
            <div style={{ ...S.logoMark, width:32, height:32, fontSize:"0.55rem" }}>INC</div>
            <div style={{ fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:"0.9rem" }}>INCOSE Portugal</div>
          </div>
          <p style={{ fontSize:"0.82rem", color:"var(--muted)", lineHeight:1.7, marginBottom:"1rem" }}>Cap√≠tulo oficial INCOSE. Operado pela SESPT desde 2025.</p>
          <div style={{ display:"flex", gap:"0.6rem" }}>
            {["in","‚ñ∂","‚úâ"].map(i=><a key={i} href="#" style={{ width:30, height:30, borderRadius:6, background:"rgba(255,255,255,0.05)", border:"1px solid var(--border)", display:"flex", alignItems:"center", justifyContent:"center", color:"var(--muted)", textDecoration:"none", fontSize:"0.75rem", transition:"all 0.2s" }} onMouseEnter={e=>{ e.target.style.background="var(--teal)"; e.target.style.color="#fff"; }} onMouseLeave={e=>{ e.target.style.background="rgba(255,255,255,0.05)"; e.target.style.color="var(--muted)"; }}>{i}</a>)}
          </div>
        </div>
        <div>
          <h4 style={{ fontSize:"0.65rem", fontWeight:700, letterSpacing:2, textTransform:"uppercase", color:"var(--cork)", marginBottom:"1rem" }}>Quick Links</h4>
          {["Sobre N√≥s","Membership","Eventos","Knowledge Base","Job Board","INCOSE Global ‚Üó"].map(l=><a key={l} href="#" style={{ display:"block", fontSize:"0.82rem", color:"var(--muted)", textDecoration:"none", marginBottom:"0.4rem" }}>{l}</a>)}
        </div>
        <div>
          <h4 style={{ fontSize:"0.65rem", fontWeight:700, letterSpacing:2, textTransform:"uppercase", color:"var(--cork)", marginBottom:"1rem" }}>Contacto SESPT</h4>
          <p style={{ fontSize:"0.82rem", color:"var(--muted)", lineHeight:1.7 }}>Rua [a completar]<br/>1000-000 Lisboa</p>
          {["geral@sespt.pt","membership@sespt.pt"].map(e=><a key={e} href={`mailto:${e}`} style={{ display:"block", fontSize:"0.82rem", color:"var(--muted)", textDecoration:"none", marginTop:"0.3rem" }}>{e}</a>)}
        </div>
        <div>
          <h4 style={{ fontSize:"0.65rem", fontWeight:700, letterSpacing:2, textTransform:"uppercase", color:"var(--cork)", marginBottom:"1rem" }}>Legal</h4>
          {["Pol√≠tica de Privacidade","Termos de Utiliza√ß√£o","Pol√≠tica de Cookies","RGPD ‚Äì Right to be Forgotten","Estatutos SESPT"].map(l=><a key={l} href="#" style={{ display:"block", fontSize:"0.82rem", color:"var(--muted)", textDecoration:"none", marginBottom:"0.4rem" }}>{l}</a>)}
        </div>
      </div>
      <div style={{ maxWidth:1200, margin:"0 auto", padding:"1rem 2rem", borderTop:"1px solid var(--border)", display:"flex", justifyContent:"space-between", flexWrap:"wrap", gap:"0.5rem" }}>
        <p style={{ fontSize:"0.74rem", color:"rgba(255,255,255,0.3)", lineHeight:1.6 }}>
          <strong style={{ color:"rgba(255,255,255,0.4)" }}>{t.footer_legal}</strong>
          <br/>¬© 2026 SESPT. INCOSE¬Æ marca registada da INCOSE. incose.pt
        </p>
        <div style={{ display:"flex", gap:"1.2rem" }}>
          {["Mapa do site","Acessibilidade","Contactos"].map(l=><a key={l} href="#" style={{ fontSize:"0.72rem", color:"rgba(255,255,255,0.3)", textDecoration:"none" }}>{l}</a>)}
        </div>
      </div>
    </footer>
  );
};

// ‚îÄ‚îÄ‚îÄ APP ROOT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
export default function App() {
  const [page, setPage] = useState("home");
  const [lang, setLang] = useState("pt");
  const [user, setUser] = useState(null);
  const [cookie, setCookie] = useState(true);
  const [authOpen, setAuthOpen] = useState(false);

  const login = (u) => setUser(u);
  const logout = () => { setUser(null); setPage("home"); };

  // Inject CSS
  useEffect(()=>{
    const style = document.createElement("style");
    style.textContent = CSS + `@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.7)}}`;
    document.head.appendChild(style);
    return ()=> document.head.removeChild(style);
  }, []);

  const pages = {
    home: <HomePage setPage={setPage} lang={lang} user={user} onOpenAuth={()=>setAuthOpen(true)} />,
    about: <AboutPage />,
    events: <EventsPage user={user} onOpenAuth={()=>setAuthOpen(true)} />,
    knowledge: <KnowledgePage user={user} onOpenAuth={()=>setAuthOpen(true)} />,
    jobs: <JobsPage user={user} onOpenAuth={()=>setAuthOpen(true)} />,
    membership: <MembershipPage user={user} onOpenAuth={()=>setAuthOpen(true)} />,
    dashboard: <DashboardPage user={user} onOpenAuth={()=>setAuthOpen(true)} />,
    admin: <AdminPage user={user} />,
  };

  return (
    <AppCtx.Provider value={{ login, logout }}>
      <div style={S.page}>
        <Header page={page} setPage={setPage} lang={lang} setLang={setLang} user={user} onOpenAuth={()=>setAuthOpen(true)} />
        <main style={{ flex:1 }}>
          {pages[page] || pages.home}
        </main>
        <Footer lang={lang} />
        {cookie && <CookieBanner onAccept={()=>setCookie(false)} />}
        <AuthModal open={authOpen} onClose={()=>setAuthOpen(false)} />
      </div>
    </AppCtx.Provider>
  );
}
